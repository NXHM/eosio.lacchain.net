(self.webpackChunkes_latamkink_io=self.webpackChunkes_latamkink_io||[]).push([[3957],{3905:function(e,a,o){"use strict";o.d(a,{Zo:function(){return c},kt:function(){return m}});var n=o(67294);function r(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function s(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?s(Object(o),!0).forEach((function(a){r(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function t(e,a){if(null==e)return{};var o,n,r=function(e,a){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],a.indexOf(o)>=0||(r[o]=e[o]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)o=s[n],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var d=n.createContext({}),l=function(e){var a=n.useContext(d),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},c=function(e){var a=l(e.components);return n.createElement(d.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var o=e.components,r=e.mdxType,s=e.originalType,d=e.parentName,c=t(e,["components","mdxType","originalType","parentName"]),p=l(o),m=r,v=p["".concat(d,".").concat(m)]||p[m]||u[m]||s;return o?n.createElement(v,i(i({ref:a},c),{},{components:o})):n.createElement(v,i({ref:a},c))}));function m(e,a){var o=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=o.length,i=new Array(s);i[0]=p;var t={};for(var d in a)hasOwnProperty.call(a,d)&&(t[d]=a[d]);t.originalType=e,t.mdxType="string"==typeof e?e:r,i[1]=t;for(var l=2;l<s;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},33779:function(e,a,o){"use strict";o.r(a),o.d(a,{frontMatter:function(){return i},metadata:function(){return t},toc:function(){return d},default:function(){return c}});var n=o(22122),r=o(19756),s=(o(67294),o(3905)),i={id:"mecanismo-consenso",title:"Mecanismo de Consenso",sidebar_label:"Mecanismo de Consenso"},t={unversionedId:"mecanismo-consenso",id:"mecanismo-consenso",isDocsHomePage:!1,title:"Mecanismo de Consenso",description:"El mecanismo de consenso asegura que cada nuevo bloque que se agrega al Blockchain sea la \xfanica versi\xf3n de la verdad acordada por todos los nodos en la red. Por lo tanto, un algoritmo de consenso tiene como objetivo encontrar un acuerdo com\xfan que sea una aceptado por toda la red.",source:"@site/docs/mecanismo-consenso.md",sourceDirName:".",slug:"/mecanismo-consenso",permalink:"/docs/mecanismo-consenso",editUrl:"https://github.com/LatamLink/es.latamlink.io/tree/master/docs/mecanismo-consenso.md",version:"current",lastUpdatedAt:1621205499,formattedLastUpdatedAt:"16/5/2021",sidebar_label:"Mecanismo de Consenso",frontMatter:{id:"mecanismo-consenso",title:"Mecanismo de Consenso",sidebar_label:"Mecanismo de Consenso"},sidebar:"docs",previous:{title:"Testnet EOSIO para LACChain",permalink:"/docs/eosio"},next:{title:"Cuentas y Autorizaciones",permalink:"/docs/cuentas-permisos"}},d=[{value:"Comite Permisionador LACChain",id:"comite-permisionador-lacchain",children:[{value:"Grupo de Consenso",id:"grupo-de-consenso",children:[]}]},{value:"Nodos Validadores Activos",id:"nodos-validadores-activos",children:[{value:"Cronograma de producci\xf3n",id:"cronograma-de-producci\xf3n",children:[]},{value:"Tolerancia a fallas bizantinas",id:"tolerancia-a-fallas-bizantinas",children:[]},{value:"Tolerancia a fallas en nodos",id:"tolerancia-a-fallas-en-nodos",children:[]}]},{value:"Nodos Validadores de Reserva",id:"nodos-validadores-de-reserva",children:[{value:"Rotaci\xf3n de nodos activos",id:"rotaci\xf3n-de-nodos-activos",children:[]},{value:"Sustituci\xf3n de un Productor de Bloques activo",id:"sustituci\xf3n-de-un-productor-de-bloques-activo",children:[]}]},{value:"Contratos de sistema EOSIO a la medida",id:"contratos-de-sistema-eosio-a-la-medida",children:[{value:"Funciones dPOS deshabilitadas:",id:"funciones-dpos-deshabilitadas",children:[]}]}],l={toc:d};function c(e){var a=e.components,o=(0,r.Z)(e,["components"]);return(0,s.kt)("wrapper",(0,n.Z)({},l,o,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"El mecanismo de consenso asegura que cada nuevo bloque que se agrega al Blockchain sea la \xfanica versi\xf3n de la verdad acordada por todos los nodos en la red. Por lo tanto, un algoritmo de consenso tiene como objetivo encontrar un acuerdo com\xfan que sea una aceptado por toda la red."),(0,s.kt)("p",null,"En el caso de LACChain EOSIO existe un grupo de nodos que poseen la autoridad de validar transacciones y escribir estas transacciones dentro de bloques nuevos. A estos nodos los denominaremos ",(0,s.kt)("strong",{parentName:"p"},"Validadores"),". "),(0,s.kt)("h2",{id:"comite-permisionador-lacchain"},"Comite Permisionador LACChain"),(0,s.kt)("p",null,"LACChain es una red p\xfablica/permisionada, de tal manera que se requiere de una autoridad central que gobierna la actividad de la red, esto con el objetivo de obtener una red legalmente supervisada."),(0,s.kt)("p",null,"LACChain se dise\xf1a bajo el principio de que el comit\xe9 permisionador sea transparente y tenga la menor intervenci\xf3n posible. "),(0,s.kt)("p",null,"La autoridad del comite permisionador podr\xe1 ser derivada de un conjunto de actores mediante aprobaciones multifirmas ",(0,s.kt)("a",{parentName:"p",href:"https://developers.eos.io/manuals/eosjs/v21.0/how-to-guides/how-to-propose-a-multisig-transaction/#gatsby-focus-wrapper"},(0,s.kt)("inlineCode",{parentName:"a"},"multisig"))," te tal manera que se requieran de la aprobaci\xf3n del grupo mediante la firma de la mayor\xeda simple, es decir, que se junten las firmas de la mitad de los actores m\xe1s uno adicional como m\xednimo."),(0,s.kt)("p",null,"Dentro de la principales funciones del comit\xe9 permisionador esta evaluar las entidades que quieran registrarse y desplegar nodos validadores."),(0,s.kt)("h3",{id:"grupo-de-consenso"},"Grupo de Consenso"),(0,s.kt)("p",null,"El grupo de nodos validadores activos poseen la autoridad de escribir a la cadena de bloques porque fueron otorgados este privilegio por parte de la  autoridad superior, el ",(0,s.kt)("strong",{parentName:"p"},"comit\xe9 permisionador"),", quien sera la m\xe1xima autoridad y quien determina cuales entidades ser\xe1n responsables de operar los nodos validadores. "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"}," Cualquier entidad que cumpla con un m\xednimo de requisitos t\xe9cnicos y legales puede aplicar para ser validador de bloques en LACChain EOSIO. Consulte nuestra secci\xf3n sobre el ",(0,s.kt)("a",{parentName:"p",href:"guias/crear-cuenta-entidad"},"proceso de permisionado")," para obtener m\xe1s informaci\xf3n.")),(0,s.kt)("p",null,"Eventualmente habr\xe1 un veh\xedculo legal, quien verifica identidad y firma contratos con entidades que operan los nodos validadores. "),(0,s.kt)("h2",{id:"nodos-validadores-activos"},"Nodos Validadores Activos"),(0,s.kt)("p",null,"Los nodos validadores autorizados como nodos nodos validadores activos pertenecen a un grupo que comparte la responsabilidad de validar y escribir todas las acciones en la red."),(0,s.kt)("p",null,"Son capaces de reconocer las firmas de los nodos escritores y verificar que las transacciones hayan sido transmitidas a la red por nodos autorizados mediante listas blancas en contratos inteligentes. "),(0,s.kt)("p",null,"Una red EOSIO esta configurada por defecto para utilizar 21 validadores activos y una serie validadores de reserva para una operaci\xf3n estable."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"}," EOSIO permite hasta ",(0,s.kt)("strong",{parentName:"p"},"125 productores de bloque activos"),", especificado mediante ",(0,s.kt)("inlineCode",{parentName:"p"},"max_producers")," en ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/EOSIO/eos/blob/master/libraries/chain/include/eosio/chain/config.hpp#L106"},"config.hpp")," ")),(0,s.kt)("h3",{id:"cronograma-de-producci\xf3n"},"Cronograma de producci\xf3n"),(0,s.kt)("p",null,"En redes EOSIO, los nodos validadores activos se enumeran en un cronograma, llamado ",(0,s.kt)("inlineCode",{parentName:"p"},"schedule")),(0,s.kt)("p",null,"La lista de nodos validadores en el ",(0,s.kt)("inlineCode",{parentName:"p"},"schedule")," se ordena alfab\xe9ticamente y as\xed se define la secuencia en que deben firmar bloques. "),(0,s.kt)("p",null,"Cada validador recibe una ventana de 12 bloques para firmar antes de que el siguiente validador inicie su ventana. Los bloques nuevos son producidos por el primer nodo en la lista durante un periodo de 6 segundos (12 bloques) y luego pasa el siguiente nodo a producir los siguientes 12 bloques y as\xed sucesivamente. "),(0,s.kt)("p",null,"Si un nodo validador no est\xe1 listo o no est\xe1 disponible, no hay nadie para producir los 12 bloques, por lo que todas las transacciones especulativas se retrasan hasta que el pr\xf3ximo validador comience a firmar."),(0,s.kt)("h3",{id:"tolerancia-a-fallas-bizantinas"},"Tolerancia a fallas bizantinas"),(0,s.kt)("p",null,"Los bloques no se consideran irreversibles en la cadena hasta que hayan sido validados por 2/3 +1 de los validadores activos. De tal manera que si un validador del grupo inserta un bloque invalido los nodos siguientes lo rechazaran y las transacciones y no ser\xe1n incluidas sin que 2/3 +1 hayan validado ese bloque. "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},(0,s.kt)("strong",{parentName:"p"},"Ejemplo:")," Una red de 21 validadores activos requiere validaci\xf3n de 15 nodos (2/3 +1), lo cual toma en promedio 90 segundos para obtener irreversibilidad de un bloque nuevo.")),(0,s.kt)("h3",{id:"tolerancia-a-fallas-en-nodos"},"Tolerancia a fallas en nodos"),(0,s.kt)("p",null,'Una vez que se firma un bloque, otros productores lo validan en el cronograma y pasa a un estado irreversible despu\xe9s de que 2/3 + 1 productores lo hayan validado. Entonces, si 1/3 o m\xe1s de todos los productores est\xe1n fuera de l\xednea, el \xfaltimo n\xfamero de bloque irreversible, conocido como "Last Irreversible Block" o LIB, no aumentar\xeda y la cadena de bloques se detendr\xe1.'),(0,s.kt)("p",null,"Los servidores a veces fallan, y a veces deben ser retirados de operaci\xf3n para actualizaciones de software y mantenimiento del sistema, lo que es importante considerar en redes EOSIO peque\xf1as."),(0,s.kt)("p",null,"Con solo 5 validadores, la red tolerar\xe1 que 1 validadores se desconecte. Si m\xe1s de uno est\xe1 fuera de l\xednea, el n\xfamero del ",(0,s.kt)("strong",{parentName:"p"},"\xfaltimo bloque irreversible (LIB)")," dejar\xe1 de moverse y la red se detendr\xe1. Con 4 nodos, la interrupci\xf3n de un nodo interrumpir\xe1 la operaci\xf3n. Con 9 validadores, dos nodos pueden desconectarse sin romper la red."),(0,s.kt)("p",null,"Es importante que las llaves privadas de producci\xf3n est\xe9n respaldadas correctamente. Si se pierden llaves de nodos validadores debido a un desastre del sistema, existe la posibilidad de que la red deje de funcionar para siempre."),(0,s.kt)("h2",{id:"nodos-validadores-de-reserva"},"Nodos Validadores de Reserva"),(0,s.kt)("p",null,"Las redes EOSIO manejan un grupo de validadores registrados que pueden asumir el rol de producir bloques con solo ser agregado al ",(0,s.kt)("inlineCode",{parentName:"p"},"schedule")," de nodos validadores activos por el comit\xe9 permisionador."),(0,s.kt)("h3",{id:"rotaci\xf3n-de-nodos-activos"},"Rotaci\xf3n de nodos activos"),(0,s.kt)("p",null,"La rotaci\xf3n peri\xf3dica de nodos validadores activos favorece la descentralizaci\xf3n. Por esta raz\xf3n el comit\xe9 permisionador contar\xe1 con una ",(0,s.kt)("a",{parentName:"p",href:"herramientas/gobernanza-red"},"herramienta de gesti\xf3n de red")," que permita seleccionar los nodos validadores que desea incluir o excluir en el ",(0,s.kt)("inlineCode",{parentName:"p"},"schedule"),". "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},(0,s.kt)("strong",{parentName:"p"},"Por ejemplo"),": Se puede definir una pol\xedtica de rotaci\xf3n de nodos activos semanalmente.  ")),(0,s.kt)("p",null,"Mas adelante se habilitar\xe1 la rotaci\xf3n peri\xf3dica y autom\xe1tica basada en contratos inteligentes. De tal forma que sea imposible predecir quienes sean los nodos validadores activos seleccionados. (entrop\xeda externa)"),(0,s.kt)("h3",{id:"sustituci\xf3n-de-un-productor-de-bloques-activo"},"Sustituci\xf3n de un Productor de Bloques activo"),(0,s.kt)("p",null,"En caso de que alg\xfan nodo del grupo principal dejara de responder. El comit\xe9 permisionador podr\xe1 reemplazar manualmente los nodos validadores que presenten problemas de rendimiento o seguridad."),(0,s.kt)("p",null,"Eventualmente se podr\xe1 implementar un contrato inteligente que sustituya una cuenta en el ",(0,s.kt)("inlineCode",{parentName:"p"},"schedule")," de forma autom\xe1tica basado en m\xe9tricas objetivas de rendimiento."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Aun se requiere definir n\xfamero \xf3ptimo de nodos validadores de respaldo para LACChain.")),(0,s.kt)("h2",{id:"contratos-de-sistema-eosio-a-la-medida"},"Contratos de sistema EOSIO a la medida"),(0,s.kt)("p",null,"LACChain utilizar\xe1 contratos de sistema hechos a la medida. Para esto nos basaremos en los contratos de sistema nativos de EOSIO, donde el principal cambio es sustituir el mecanismo nativo ",(0,s.kt)("strong",{parentName:"p"},"Delegated Proof of Stake (DPOS)")," por el est\xe1ndar definido por ",(0,s.kt)("strong",{parentName:"p"},"LACChain"),"."),(0,s.kt)("p",null,"Este cambio implica deshabilitar el uso de tokens y de votos caracter\xedsticos del protocolo DPOS. Es decir, al momento de girar recursos, no ser\xe1 necesario disponer de ning\xfan token. "),(0,s.kt)("h3",{id:"funciones-dpos-deshabilitadas"},"Funciones dPOS deshabilitadas:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Token de Sistema"),(0,s.kt)("li",{parentName:"ul"},"Votos por nodos productores de bloques"),(0,s.kt)("li",{parentName:"ul"},"Pago de nodos productores de bloques"),(0,s.kt)("li",{parentName:"ul"},'"Staking" para recursos'),(0,s.kt)("li",{parentName:"ul"},"Delegaci\xf3n de Recursos"),(0,s.kt)("li",{parentName:"ul"},"Namebiding"),(0,s.kt)("li",{parentName:"ul"},"Rex")),(0,s.kt)("p",null,"Esta funcionalidad no necesariamente se eliminar\xe1, sino que se utilizar\xe1 una funci\xf3n de \u201cassert false\u201d para deshabilitar las funciones ya que la plataforma no soporta estas funciones."),(0,s.kt)("p",null,"En esencia los contratos de sistema de LAC Chain definen un mecanismo para registrar los nodos validadores as\xed como asignar ",(0,s.kt)("strong",{parentName:"p"},"recursos de sistema")," requeridos por las cuentas de nodos escritores de la red para ejecutar sus contratos inteligentes."))}c.isMDXComponent=!0}}]);